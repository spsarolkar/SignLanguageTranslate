# Phase definitions for SignLanguageTranslate
# Each phase represents a discrete unit of work in the development process

modules:
  - id: module1
    name: "Project Foundation"
    description: "Core setup, SwiftData models, and persistence layer"
    
    phases:
      - id: "1.1"
        name: "Xcode Project Setup"
        prompt_file: "module1/phase_1.1.md"
        description: "Create project structure and basic app shell"
        expected_files:
          - "App/SignLanguageTranslateApp.swift"
          - "Features/DatasetManager/Views/ContentView.swift"
        tests_required: false
        screenshot: true
        
      - id: "1.2"
        name: "Core Extensions & Utilities"
        prompt_file: "module1/phase_1.2.md"
        description: "FileManager, String, URL extensions and utilities"
        expected_files:
          - "Core/Extensions/FileManager+Extensions.swift"
          - "Core/Extensions/String+Extensions.swift"
          - "Core/Extensions/URL+Extensions.swift"
          - "Core/Utilities/Constants.swift"
        tests_required: true
        screenshot: false
        
      - id: "1.3"
        name: "SwiftData Label Model"
        prompt_file: "module1/phase_1.3.md"
        description: "Label and LabelType SwiftData models"
        expected_files:
          - "Features/DatasetManager/Models/Label.swift"
          - "Features/DatasetManager/Models/LabelType.swift"
        tests_required: true
        screenshot: false
        
      - id: "1.4"
        name: "SwiftData VideoSample Model"
        prompt_file: "module1/phase_1.4.md"
        description: "VideoSample model with Label relationships"
        expected_files:
          - "Features/DatasetManager/Models/VideoSample.swift"
        tests_required: true
        screenshot: false
        
      - id: "1.5"
        name: "SwiftData Dataset Model"
        prompt_file: "module1/phase_1.5.md"
        description: "Dataset, DatasetType, and DownloadStatus models"
        expected_files:
          - "Features/DatasetManager/Models/Dataset.swift"
          - "Features/DatasetManager/Models/DatasetType.swift"
          - "Features/DatasetManager/Models/DownloadStatus.swift"
        tests_required: true
        screenshot: false
        
      - id: "1.6"
        name: "SwiftData Relationships & Container"
        prompt_file: "module1/phase_1.6.md"
        description: "PersistenceController and ModelQueries helpers"
        expected_files:
          - "Core/Persistence/PersistenceController.swift"
          - "Core/Persistence/ModelQueries.swift"
        tests_required: true
        screenshot: true
        
      - id: "1.7"
        name: "Unit Tests Consolidation"
        prompt_file: "module1/phase_1.7.md"
        description: "Comprehensive test coverage for all models"
        expected_files:
          - "SignLanguageTranslateTests/Utilities/TestHelpers.swift"
          - "SignLanguageTranslateTests/Integration/ModelRelationshipTests.swift"
        tests_required: true
        screenshot: false

  - id: module2
    name: "Manifest & Download Queue"
    description: "Download orchestration and queue management system"
    
    phases:
      - id: "2.1"
        name: "INCLUDE Manifest Definition"
        prompt_file: "module2/phase_2.1.md"
        description: "Manifest system for INCLUDE dataset (46 zip files)"
        expected_files:
          - "Features/DatasetManager/Manifest/CategoryManifest.swift"
          - "Features/DatasetManager/Manifest/INCLUDEManifest.swift"
          - "Features/DatasetManager/Manifest/ManifestEntry.swift"
        tests_required: true
        screenshot: false
        
      - id: "2.2"
        name: "DownloadTask Model"
        prompt_file: "module2/phase_2.2.md"
        description: "Download task state tracking model"
        expected_files:
          - "Features/DatasetManager/Downloads/DownloadTask.swift"
          - "Features/DatasetManager/Downloads/DownloadTaskStatus.swift"
          - "Features/DatasetManager/Downloads/DownloadTaskGroup.swift"
        tests_required: true
        screenshot: false
        
      - id: "2.3"
        name: "DownloadQueue Actor"
        prompt_file: "module2/phase_2.3.md"
        description: "Thread-safe queue management with Swift Actors"
        expected_files:
          - "Features/DatasetManager/Downloads/DownloadQueueActor.swift"
          - "Features/DatasetManager/Downloads/DownloadQueueState.swift"
          - "Features/DatasetManager/Downloads/DownloadQueueDelegate.swift"
        tests_required: true
        screenshot: false
        
      - id: "2.4"
        name: "DownloadQueue Unit Tests"
        prompt_file: "module2/phase_2.4.md"
        description: "Comprehensive queue and task tests"
        expected_files:
          - "SignLanguageTranslateTests/Downloads/DownloadQueueActorTests.swift"
          - "SignLanguageTranslateTests/Downloads/DownloadTaskTests.swift"
        tests_required: true
        screenshot: false
        
      - id: "2.5"
        name: "DownloadManager Observable"
        prompt_file: "module2/phase_2.5.md"
        description: "SwiftUI integration wrapper for queue"
        expected_files:
          - "Features/DatasetManager/Downloads/DownloadManager.swift"
          - "Features/DatasetManager/Downloads/DownloadManagerError.swift"
        tests_required: true
        screenshot: false
        
      - id: "2.6"
        name: "Download Progress UI"
        prompt_file: "module2/phase_2.6.md"
        description: "Progress indicators and download list UI"
        expected_files:
          - "Features/DatasetManager/Views/Components/DownloadProgressView.swift"
          - "Features/DatasetManager/Views/DownloadListView.swift"
        tests_required: false
        screenshot: true

  - id: module3
    name: "Basic UI Shell"
    description: "Core navigation and UI structure"
    
    phases:
      - id: "3.1"
        name: "App Navigation Structure"
        prompt_file: "module3/phase_3.1.md"
        description: "NavigationSplitView for iPad"
        tests_required: false
        screenshot: true
        
      - id: "3.2"
        name: "Dataset List Item View"
        prompt_file: "module3/phase_3.2.md"
        description: "Row view for dataset list"
        tests_required: false
        screenshot: true
        
      - id: "3.3"
        name: "Dataset List View"
        prompt_file: "module3/phase_3.3.md"
        description: "Sidebar list of datasets"
        tests_required: false
        screenshot: true
        
      - id: "3.4"
        name: "Integrate List into Split View"
        prompt_file: "module3/phase_3.4.md"
        description: "Connect list to navigation"
        tests_required: false
        screenshot: true
        
      - id: "3.5"
        name: "Download Task Row View"
        prompt_file: "module3/phase_3.5.md"
        description: "Individual download task row"
        tests_required: false
        screenshot: true
        
      - id: "3.6"
        name: "Download Tasks List Sheet"
        prompt_file: "module3/phase_3.6.md"
        description: "Sheet showing all downloads"
        tests_required: false
        screenshot: true

  - id: module4
    name: "Download Implementation"
    description: "Actual download functionality with URLSession"

    phases:
      - id: "4.1"
        name: "Background URLSession Configuration"
        prompt_file: "module4/phase_4.1.md"
        description: "Set up background download capabilities"
        expected_files:
          - "Features/DatasetManager/Downloads/BackgroundSessionManager.swift"
          - "Features/DatasetManager/Downloads/DownloadCoordinator.swift"
          - "Features/DatasetManager/Downloads/DownloadFileManager.swift"
        tests_required: false
        screenshot: false

      - id: "4.2"
        name: "Download Engine Implementation"
        prompt_file: "module4/phase_4.2.md"
        description: "Core download engine that processes the queue"
        expected_files:
          - "Features/DatasetManager/Downloads/DownloadEngine.swift"
          - "Features/DatasetManager/Downloads/DownloadEngineDelegate.swift"
          - "Core/Utilities/NetworkMonitor.swift"
        tests_required: false
        screenshot: false

      - id: "4.3"
        name: "Progress Tracking and Persistence"
        prompt_file: "module4/phase_4.3.md"
        description: "Robust progress tracking that survives app restarts"
        expected_files:
          - "Features/DatasetManager/Downloads/DownloadStatePersistence.swift"
          - "Features/DatasetManager/Downloads/DownloadProgressTracker.swift"
          - "Features/DatasetManager/Downloads/ResumeDataManager.swift"
          - "Features/DatasetManager/Downloads/DownloadHistory.swift"
        tests_required: false
        screenshot: false

      - id: "4.4"
        name: "Download System Tests"
        prompt_file: "module4/phase_4.4.md"
        description: "Comprehensive tests for download system"
        expected_files:
          - "SignLanguageTranslateTests/Downloads/BackgroundSessionManagerTests.swift"
          - "SignLanguageTranslateTests/Downloads/DownloadEngineTests.swift"
          - "SignLanguageTranslateTests/Downloads/DownloadIntegrationTests.swift"
          - "SignLanguageTranslateTests/Mocks/MockURLSession.swift"
        tests_required: true
        screenshot: false

      - id: "4.5"
        name: "Connect Download UI to Engine"
        prompt_file: "module4/phase_4.5.md"
        description: "Wire up UI components to real download engine"
        tests_required: false
        screenshot: true

      - id: "4.6"
        name: "Download Error Handling UI"
        prompt_file: "module4/phase_4.6.md"
        description: "Comprehensive error handling and recovery UI"
        expected_files:
          - "Features/DatasetManager/Views/Components/DownloadErrorView.swift"
          - "Features/DatasetManager/Views/Components/DownloadErrorBanner.swift"
          - "Features/DatasetManager/Views/DownloadErrorListView.swift"
          - "Features/DatasetManager/Views/Components/StorageWarningView.swift"
          - "Features/DatasetManager/Views/Components/NetworkErrorView.swift"
        tests_required: false
        screenshot: true

  - id: module5
    name: "Extraction and Ingestion"
    description: "Zip extraction and video file ingestion"

    phases:
      - id: "5.1"
        name: "Zip Extraction System"
        prompt_file: "module5/phase_5.1.md"
        description: "Implement zip file extraction for downloaded datasets"
        expected_files:
          - "Features/DatasetManager/Extraction/ZipExtractor.swift"
          - "Features/DatasetManager/Extraction/ExtractionCoordinator.swift"
          - "Features/DatasetManager/Extraction/MultiPartMerger.swift"
          - "Features/DatasetManager/Extraction/ExtractionProgress.swift"
          - "Features/DatasetManager/Extraction/ZipValidation.swift"
        tests_required: false
        screenshot: false

      - id: "5.2"
        name: "Video File Ingestion"
        prompt_file: "module5/phase_5.2.md"
        description: "Create VideoSample records from extracted video files"
        expected_files:
          - "Features/DatasetManager/Ingestion/VideoIngestionService.swift"
          - "Features/DatasetManager/Ingestion/VideoFileScanner.swift"
          - "Features/DatasetManager/Ingestion/VideoMetadataExtractor.swift"
          - "Features/DatasetManager/Ingestion/INCLUDEIngestionStrategy.swift"
          - "Features/DatasetManager/Ingestion/IngestionProgressTracker.swift"
        tests_required: false
        screenshot: false

      - id: "5.3"
        name: "Extraction UI and Integration"
        prompt_file: "module5/phase_5.3.md"
        description: "UI for extraction/ingestion progress and pipeline integration"
        expected_files:
          - "Features/DatasetManager/Views/Components/ExtractionProgressView.swift"
          - "Features/DatasetManager/Views/Components/IngestionProgressView.swift"
          - "Features/DatasetManager/Views/Components/DatasetProcessingView.swift"
          - "Features/DatasetManager/Processing/DatasetProcessor.swift"
          - "Features/DatasetManager/Views/Components/StatBadge.swift"
        tests_required: false
        screenshot: true
