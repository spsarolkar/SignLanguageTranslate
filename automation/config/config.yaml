# SignLanguageTranslate Automation Configuration

project:
  name: SignLanguageTranslate
  path: ../SignLanguageTranslate.xcodeproj
  scheme: SignLanguageTranslate
  test_scheme: SignLanguageTranslateTests
  bundle_id: in.sunilsarolkar.signlanguagetranslate.SignLanguageTranslate
  workspace: null  # Set if using workspace instead of project

simulator:
  # iPad Pro (11-inch) (3rd generation)
  name: "iPad Pro (11-inch) (3rd generation)"
  os: "26.2"
  device_type_id: "com.apple.CoreSimulator.SimDeviceType.iPad-Pro-11-inch-3rd-generation-8GB"
  # Alternative: Use UDID directly if known
  udid: null

automation:
  max_retries_per_step: 5
  max_retries_per_phase: 10
  delay_between_claude_calls: 5    # seconds between API calls (proactive pacing)
  delay_after_failure: 10           # extra delay after failures before retry
  build_timeout_seconds: 600
  test_timeout_seconds: 300
  screenshot_delay_seconds: 3
  
  # Rate limiting
  rate_limit_base_wait_seconds: 60
  rate_limit_max_wait_seconds: 900  # 15 minutes max
  rate_limit_backoff_multiplier: 2
  
  # Features
  auto_commit: true
  capture_screenshots: true
  update_dashboard_interval_seconds: 30
  pause_between_phases_seconds: 5
  confirmation_timeout_seconds: 20    # seconds to wait for user input after phase (q to quit)

claude:
  # Use Claude CLI (claude command) or direct API
  use_cli: true
  
  # Model selection - Sonnet 4.5 (good capability + better rate limits than Opus)
  model: claude-sonnet-4-5-20250929
  
  # Token limits
  max_tokens: 16000
  
  # API configuration (only if use_cli is false)
  api_key_env: ANTHROPIC_API_KEY
  
  # Prompt configuration
  include_project_context: true
  context_files:
    - "../SignLanguageTranslate/Core/**/*.swift"
    - "../SignLanguageTranslate/Features/**/*.swift"

git:
  enabled: true
  auto_commit: true
  auto_push: false  # Set true to auto-push after each phase
  
  # Commit message template (supports Jinja2)
  commit_message_template: |
    feat({{ module }}): Phase {{ phase_id }} - {{ phase_name }}
    
    {{ description }}
    
    Iterations: {{ iterations }}
    Duration: {{ duration }}
    
    ðŸ¤– Generated by SignLanguageTranslate Automation
  
  # Branch strategy
  use_feature_branches: false
  branch_prefix: "auto/"
  
  # Pull request
  create_pr: false
  pr_base_branch: main

github_pages:
  enabled: true
  branch: gh-pages
  publish_dir: automation/dashboard
  
  # Auto-update triggers
  update_on_phase_start: true
  update_on_phase_complete: true
  update_on_error: true
  update_on_rate_limit: true
  
  # Auto-push to trigger GitHub Pages rebuild
  auto_push: true

analytics:
  enabled: true
  database_path: state/analytics.db
  
  # Export JSON for dashboard
  export_json: true
  export_path: dashboard/data/analytics.json
  
  # What to track
  track_token_usage: true
  track_time_per_phase: true
  track_error_frequency: true
  track_iterations: true
  track_file_changes: true

logging:
  level: INFO
  file_level: DEBUG
  
  # Rich console formatting
  console_format: rich
  show_timestamps: true
  
  # Log file settings
  log_dir: logs
  log_filename_format: "automation_{date}.log"
  max_log_files: 30
  max_log_size_mb: 50

notifications:
  # Future: Slack, Discord, email notifications
  enabled: false
